<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HoopTix - Seating & Ticket Selection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Design System Colors & Fonts */
        :root {
            --primary-orange: #FF8C00; /* Orange */
            --secondary-navy: #1E3A8A; /* Navy blue */
            --accent-red: #E63946;    /* Accent red */
            --text-dark: #333;
            --text-light: #fff;
            --bg-light: #F8F9FA;
            --card-bg: #fff;
            --border-light: #eee;
            --gray-text: #6c757d;
            --dark-gray-bg: #495057;
            --light-green: #28a745;
            --dark-green: #218838;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Top Navigation */
        .top-nav {
            background-color: #2c3e50; /* A dark color for the top bar */
            color: #ecf0f1;
            padding: 8px 0;
            font-size: 0.8rem;
        }
        
        .top-nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-promo {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-promo i {
            color: var(--primary-orange);
        }
        
        .top-nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            margin-left: 15px;
            transition: color 0.3s;
        }
        
        .top-nav-links a:hover {
            color: var(--primary-orange);
        }

        /* Header / Main Navigation */
        header {
            background-color: var(--secondary-navy);
            color: var(--text-light);
            padding: 10px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .main-nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
        }

        .logo h1 {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-light);
            margin: 0;
        }
        .logo h1 span {
            color: var(--primary-orange);
        }

        .header-nav ul {
            list-style: none;
            display: flex;
            gap: 25px;
        }
        .header-nav a {
            text-decoration: none;
            color: var(--text-light);
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .header-nav a:hover {
            color: var(--primary-orange);
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 5px;
            padding: 5px 10px;
            width: 300px;
        }
        .search-bar input {
            border: none;
            background: transparent;
            color: var(--text-light);
            padding: 5px;
            width: 100%;
            outline: none;
        }
        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        .search-bar i {
            color: rgba(255, 255, 255, 0.7);
            margin-right: 5px;
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        .auth-buttons button {
            padding: 8px 15px;
            border: 1px solid var(--primary-orange);
            border-radius: 5px;
            background: var(--primary-orange);
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, color 0.3s, border-color 0.3s;
        }
        .auth-buttons button:hover {
            background: #e67e00;
            border-color: #e67e00;
        }

        /* Event Info Bar */
        .event-info-bar {
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-light);
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .event-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .event-details img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            border-radius: 5px;
        }
        .event-text h3 {
            font-size: 1.25rem;
            color: var(--secondary-navy);
            margin-bottom: 5px;
        }
        .event-text p {
            font-size: 0.9rem;
            color: var(--gray-text);
        }
        .event-actions {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-left: auto;
        }
        .event-actions .action-button {
            background: var(--bg-light);
            border: 1px solid var(--border-light);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.2s, border-color 0.2s;
        }
        .event-actions .action-button:hover {
            background: var(--border-light);
            border-color: #ccc;
        }
        .event-actions .action-button i {
            color: var(--gray-text);
        }

        /* Filter Bar below Event Info */
        .filter-bar {
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-light);
            padding: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            margin-bottom: 20px;
        }
        .filter-options {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .filter-options .dropdown-btn, .filter-options .custom-select {
            background: var(--bg-light);
            border: 1px solid var(--border-light);
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 5px;
            min-width: 120px;
            justify-content: space-between;
        }
        .filter-options .dropdown-btn i {
            font-size: 0.8rem;
            color: var(--gray-text);
        }
        .filter-options .custom-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%236c757d" width="16" height="16"><path d="M7 10l5 5 5-5H7z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 8px top 50%;
            padding-right: 30px;
        }

        /* Main Content Layout */
        .seating-page-content {
            flex-grow: 1;
            display: grid;
            grid-template-columns: 280px 1fr 350px;
            gap: 20px;
            padding-bottom: 30px;
        }
        .left-filters {
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 180px;
        }
        .left-filters h4 {
            color: var(--secondary-navy);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        .filter-group {
            margin-bottom: 20px;
        }
        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        .price-range {
            position: relative;
            height: 40px;
            display: flex;
            align-items: center;
        }
        .price-range input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 5px;
            background: var(--border-light);
            outline: none;
            position: absolute;
            top: 15px;
        }
        .price-range input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: var(--primary-orange);
            border: 2px solid var(--text-light);
            border-radius: 50%;
            cursor: pointer;
        }
        .price-range input[type="range"]::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: var(--primary-orange);
            border: 2px solid var(--text-light);
            border-radius: 50%;
            cursor: pointer;
        }
        .range-values {
            position: absolute;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray-text);
        }
        .filter-group .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .filter-group .checkbox-item input {
            margin-right: 10px;
        }
        .arena-main-view {
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            position: relative;
        }
        .arena-main-view h2 {
            color: var(--secondary-navy);
            margin-bottom: 15px;
        }
        .arena-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px 25px;
            margin-top: 15px;
            padding: 10px 0;
            border-top: 1px solid var(--border-light);
            justify-content: center;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--gray-text);
        }
        .legend-color-box {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        .legend-best-value { background: #77dd77; }
        .legend-amazing { background: #add8e6; }
        .legend-good { background: #ffdb58; }
        .legend-okay { background: #ff6347; }
        .legend-selected { background: #4CAF50; }
        .legend-available { background: #ccc; }
        .legend-seat { background: #444; }


        /* Seating Section Styles */
        .seating-section {
            transition: fill 0.2s ease-in-out, transform 0.2s ease-in-out;
            cursor: pointer;
            stroke: var(--card-bg);
            stroke-width: 1.5;
            pointer-events: all;
        }
        .seating-section:hover {
            transform: scale(1.005);
        }
        .seating-section.selected {
            fill: #4CAF50 !important;
            stroke: var(--text-light);
            stroke-width: 3;
            animation: pulse 0.8s infinite alternate;
        }
        .seating-section[data-zone="VIP"] { fill: var(--accent-red); }
        .seating-section[data-zone="1"] { fill: #77dd77; } /* Best Value */
        .seating-section[data-zone="2"] { fill: #add8e6; } /* Amazing */
        .seating-section[data-zone="3"] { fill: #ffdb58; } /* Good */
        .seating-section[data-zone="4"] { fill: #ff6347; } /* Okay */

        @keyframes pulse {
            from { transform: scale(1.005); }
            to { transform: scale(1.02); }
        }
        /* Seat box styles */
        .seat {
            fill: #ccc;
            stroke: var(--card-bg);
            stroke-width: 1;
            cursor: pointer;
            transition: fill 0.2s, stroke 0.2s;
            rx: 2px; /* Add rounded corners to the box */
        }
        .seat:hover {
            fill: var(--primary-orange);
            transform: scale(1.1);
        }
        .seat.selected {
            fill: var(--accent-red);
            stroke: var(--text-light);
            stroke-width: 2;
        }

        /* Right Sidebar Styles */
        .right-ticket-listings {
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 180px;
            display: none;
        }
        .right-ticket-listings h3 {
            color: var(--secondary-navy);
            margin-bottom: 20px;
            font-size: 1.2rem;
            text-align: center;
        }
        .addons {
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 15px;
        }
        .addons h4 {
            margin-bottom: 10px;
        }
        .addon-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
        }
        .addon-option:hover {
            background: var(--bg-light);
        }
        .addon-option.selected {
            border-color: var(--primary-orange);
            background: rgba(255, 140, 0, 0.05);
        }
        .addon-option i {
            font-size: 1.2rem;
            color: var(--gray-text);
        }
        .addon-option.selected i {
            color: var(--primary-orange);
        }
        .addon-option span {
            flex-grow: 1;
            font-weight: 500;
        }
        .addon-option .addon-price {
            font-weight: 600;
            color: var(--primary-orange);
        }
        .ticket-listing-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            margin-bottom: 15px;
            transition: background 0.2s, border-color 0.2s;
            cursor: pointer;
        }
        .ticket-listing-item:hover {
            background: var(--bg-light);
            border-color: var(--primary-orange);
        }
        .ticket-listing-item.selected-listing {
            border-color: var(--accent-red);
            background: rgba(230, 57, 70, 0.05);
            box-shadow: 0 0 10px rgba(230, 57, 70, 0.2);
        }
        .listing-price {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--secondary-navy);
            flex-shrink: 0;
        }
        .listing-details {
            flex-grow: 1;
        }
        .listing-details p {
            margin: 0;
            font-size: 0.95rem;
            color: var(--gray-text);
        }
        .listing-details .section-row {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1rem;
            margin-bottom: 5px;
        }
        .listing-details .perks {
            font-size: 0.85rem;
            color: var(--light-green);
            margin-top: 5px;
        }
        .listing-details .availability {
            font-size: 0.8rem;
            color: var(--accent-red);
            margin-top: 5px;
        }
        .listing-details .rating {
            background: var(--light-green);
            color: var(--text-light);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 3px;
            margin-top: 8px;
        }
        .listing-details .rating i {
            font-size: 0.7rem;
        }
        .ticket-summary {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-light);
        }
        .ticket-summary p {
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
            margin-bottom: 10px;
        }
        .ticket-summary .total-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--secondary-navy);
            margin-top: 15px;
            text-align: right;
        }
        .checkout-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary-orange);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 20px;
            font-weight: 600;
        }
        .checkout-btn:hover {
            background: #e67e00;
        }
        /* SVG Arena Styling */
        #arena-map {
            width: 100%;
            max-width: 600px;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            background: #e9ecef;
        }
        .court-floor { fill: #d2b48c; stroke: var(--secondary-navy); stroke-width: 2; }
        .court-markings { stroke: var(--secondary-navy); fill: none; stroke-width: 1.5; }
        .three-point-arc { stroke-width: 2; fill: none; stroke: var(--secondary-navy); }
        .center-circle { stroke-width: 2; fill: none; stroke: var(--secondary-navy); }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .seating-page-content {
                grid-template-columns: 1fr;
            }
            .left-filters, .right-ticket-listings {
                position: static;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>

    <div class="top-nav">
        <div class="container top-nav-container">
            <div class="nav-promo">
                <i class="fas fa-ticket-alt"></i>
                <span>Get 10% off your first order! Use code: HOOPS10</span>
            </div>
            <div class="top-nav-links">
                <a href="#">Help Center</a>
                <a href="#">Sell Tickets</a>
                <a href="#">My Orders</a>
            </div>
        </div>
    </div>

    <header>
        <div class="container main-nav-bar">
            <div class="logo">
                <h1>Hoop<span>Tix</span></h1>
            </div>
            <nav class="header-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="games.html">Games</a></li>
                    <li><a href="arenas.html">Arenas</a></li>
                    <li><a href="teams.html">Teams</a></li>
                </ul>
            </nav>
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search for games or teams...">
            </div>
            <div class="auth-buttons">
                <a href="sign.html"><button>Sign In</button></a>
                <a href="register.html"><button style="background:transparent; color:var(--primary-orange); border:1px solid var(--primary-orange);">Register</button></a>
            </div>
        </div>
    </header>

    <section class="event-info-bar">
        <div class="container event-details">
            <img src="/img/Hooptix Logo.png" alt="Event Logo">
            <div class="event-text">
                <h3>Best Value for your Spirit</h3>
                <p>Get tickets of any NBA Team that you like </p>
            </div>
            
        </div>
    </section>

    <section class="filter-bar">
        <div class="container filter-options">
            <button class="dropdown-btn">Price <i class="fas fa-caret-down"></i></button>
            <button class="dropdown-btn">Features <i class="fas fa-caret-down"></i></button>
            <select class="custom-select">
                <option value="">Sort by: Best Value</option>
                <option value="price-asc">Price: Low to High</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="rating">Rating</option>
            </select>
        </div>
    </section>

    <main class="container seating-page-content">

        <aside class="left-filters">
            <h4>Filter Tickets</h4>
            <div class="filter-group">
                <label for="price-range">Price Range</label>
                <div class="price-range">
                    <input type="range" id="min-price" name="min-price" min="50" max="500" value="50">
                    <input type="range" id="max-price" name="max-price" min="50" max="500" value="500">
                    <div class="range-values">
                        <span>$50</span>
                        <span>$500</span>
                    </div>
                </div>
            </div>
            <div class="filter-group">
                <label>Ticket Type</label>
                <div class="checkbox-item">
                    <input type="checkbox" id="resale" name="ticket-type" value="resale">
                    <label for="resale">Resale Tickets</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="primary" name="ticket-type" value="primary">
                    <label for="primary">Primary Tickets</label>
                </div>
            </div>
            <div class="filter-group">
                <label>Features</label>
                <div class="checkbox-item">
                    <input type="checkbox" id="all-inclusive" name="features" value="all-inclusive">
                    <label for="all-inclusive">All-Inclusive</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="vip" name="features" value="vip">
                    <label for="vip">VIP Access</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="parking" name="features" value="parking">
                    <label for="parking">Parking Pass</label>
                </div>
            </div>
        </aside>

        <section class="arena-main-view">
            <h2>Select Your Seating Section</h2>
            <svg id="arena-map" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                <path class="seating-section" d="M 400 30 C 650 30 770 150 770 300 C 770 450 650 570 400 570 C 150 570 30 450 30 300 C 30 150 150 30 400 30" stroke="#f1f2f6" stroke-width="15" fill="#e9ecef" stroke-linecap="round" data-zone="VIP" data-price="500" data-name="VIP Section"/>
                <path class="seating-section" d="M 400 60 C 620 60 740 160 740 300 C 740 440 620 540 400 540 C 180 540 60 440 60 300 C 60 160 180 60 400 60" stroke="#f1f2f6" stroke-width="15" fill="#add8e6" stroke-linecap="round" data-zone="1" data-price="250" data-name="Section 1"/>
                <path class="seating-section" d="M 400 90 C 590 90 710 170 710 300 C 710 430 590 510 400 510 C 210 510 90 430 90 300 C 90 170 210 90 400 90" stroke="#f1f2f6" stroke-width="15" fill="#ffdb58" stroke-linecap="round" data-zone="2" data-price="150" data-name="Section 2"/>
                <path class="seating-section" d="M 400 120 C 560 120 680 180 680 300 C 680 420 560 480 400 480 C 240 480 120 420 120 300 C 120 180 240 120 400 120" stroke="#f1f2f6" stroke-width="15" fill="#ff6347" stroke-linecap="round" data-zone="3" data-price="100" data-name="Section 3"/>
                <path class="seating-section" d="M 400 150 C 530 150 650 190 650 300 C 650 410 530 450 400 450 C 270 450 150 410 150 300 C 150 190 270 150 400 150" stroke="#f1f2f6" stroke-width="15" fill="#77dd77" stroke-linecap="round" data-zone="4" data-price="80" data-name="Section 4"/>
                <path class="seating-section" d="M 400 180 C 500 180 620 200 620 300 C 620 400 500 420 400 420 C 300 420 180 400 180 300 C 180 200 300 180 400 180" stroke="#f1f2f6" stroke-width="15" fill="#e9ecef" stroke-linecap="round" data-zone="5" data-price="60" data-name="Section 5"/>
                
                <g id="seats-container"></g>

                <rect x="250" y="220" width="300" height="160" rx="10" ry="10" stroke="#333" stroke-width="2" fill="#d2b48c" />
                <path class="three-point-arc" d="M250,220 a150,150 0 0 1 0,160" transform="translate(150,0)"/>
                <path class="three-point-arc" d="M550,220 a150,150 0 0 0 0,160" transform="translate(-150,0)"/>
                <line x1="400" y1="220" x2="400" y2="380" stroke="#333" stroke-width="2" />
                <circle cx="400" cy="300" r="40" class="center-circle" />
                <circle cx="400" cy="300" r="2" fill="#333" />
            </svg>
            <div class="arena-legend">
                <div class="legend-item"><div class="legend-color-box legend-best-value"></div>Best Value</div>
                <div class="legend-item"><div class="legend-color-box legend-amazing"></div>Amazing View</div>
                <div class="legend-item"><div class="legend-color-box legend-good"></div>Good View</div>
                <div class="legend-item"><div class="legend-color-box legend-okay"></div>Okay View</div>
                <div class="legend-item"><div class="legend-color-box legend-selected"></div>Selected</div>
                <div class="legend-item"><div class="legend-color-box legend-available"></div>Available Sections</div>
                <div class="legend-item"><div class="legend-color-box legend-seat"></div>Seat</div>
            </div>
        </section>

        <aside class="right-ticket-listings" id="ticket-listings">
            <h3>Tickets for Section <span id="selected-section-name"></span></h3>
            
            <div class="addons">
                <h4>Add-Ons</h4>
                <div class="addon-option" data-price="25">
                    <i class="fas fa-parking"></i>
                    <span>Parking Pass</span>
                    <span class="addon-price">+$25</span>
                </div>
                <div class="addon-option" data-price="75">
                    <i class="fas fa-utensils"></i>
                    <span>Food & Beverage Credit</span>
                    <span class="addon-price">+$75</span>
                </div>
            </div>

            <div class="ticket-listings-container" id="ticket-listings-container">
                </div>

            <div class="ticket-summary">
                <p>Tickets: <span id="tickets-count">0</span></p>
                <p>Add-ons: <span id="addons-total">$0.00</span></p>
                <p class="total-price" id="total-price">Total: $0.00</p>
            </div>
            
            <button class="checkout-btn">Checkout</button>
        </aside>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const ticketListingsContainer = document.getElementById('ticket-listings-container');
            const rightSidebar = document.getElementById('ticket-listings');
            const selectedSectionNameEl = document.getElementById('selected-section-name');
            const totalPriceEl = document.getElementById('total-price');
            const ticketsCountEl = document.getElementById('tickets-count');
            const addonsTotalEl = document.getElementById('addons-total');
            const seatingSections = document.querySelectorAll('.seating-section');
            const seatsContainer = document.getElementById('seats-container');
            
            const selectedTickets = {};
            let addonsTotal = 0;

            // Expanded ticket data for each section
            const ticketsBySection = {
                'VIP': [
                    { id: 'vip-rowA-seat1', price: 550, section: 'VIP', row: 'A', seat: 1, perks: 'All-inclusive food and drinks', rating: '5.0', ratingValue: 20 },
                    { id: 'vip-rowA-seat2', price: 550, section: 'VIP', row: 'A', seat: 2, perks: 'All-inclusive food and drinks', rating: '5.0', ratingValue: 20 },
                    { id: 'vip-rowA-seat3', price: 550, section: 'VIP', row: 'A', seat: 3, perks: 'All-inclusive food and drinks', rating: '5.0', ratingValue: 20 },
                    { id: 'vip-rowA-seat4', price: 550, section: 'VIP', row: 'A', seat: 4, perks: 'All-inclusive food and drinks', rating: '5.0', ratingValue: 20 },
                   
              
                ],
                '1': [
                    { id: 'sec1-rowC-seat1', price: 275, section: 'Section 1', row: 'C', seat: 1, perks: 'Close to court', rating: '4.9', ratingValue: 50 },
                    { id: 'sec1-rowC-seat2', price: 275, section: 'Section 1', row: 'C', seat: 2, perks: 'Close to court', rating: '4.9', ratingValue: 50 },
                    { id: 'sec1-rowC-seat3', price: 275, section: 'Section 1', row: 'C', seat: 3, perks: 'Close to court', rating: '4.9', ratingValue: 50 },
                    { id: 'sec1-rowD-seat4', price: 260, section: 'Section 1', row: 'D', seat: 4, rating: '4.7', ratingValue: 35 },
                   
                ],
                '2': [
                    { id: 'sec2-rowG-seat1', price: 160, section: 'Section 2', row: 'G', seat: 1, rating: '4.5', ratingValue: 80 },
                    { id: 'sec2-rowG-seat2', price: 160, section: 'Section 2', row: 'G', seat: 2, rating: '4.5', ratingValue: 80 },
                    { id: 'sec2-rowG-seat3', price: 160, section: 'Section 2', row: 'G', seat: 3, rating: '4.5', ratingValue: 80 },
                    { id: 'sec2-rowG-seat4', price: 160, section: 'Section 2', row: 'G', seat: 4, rating: '4.5', ratingValue: 80 },
                    { id: 'sec2-rowH-seat5', price: 150, section: 'Section 2', row: 'H', seat: 5, rating: '4.4', ratingValue: 60 },
                  
                ],
                '3': [
                    { id: 'sec3-rowK-seat1', price: 110, section: 'Section 3', row: 'K', seat: 1, rating: '4.2', ratingValue: 95 },
                    { id: 'sec3-rowK-seat2', price: 110, section: 'Section 3', row: 'K', seat: 2, rating: '4.2', ratingValue: 95 },
                    { id: 'sec3-rowK-seat3', price: 110, section: 'Section 3', row: 'K', seat: 3, rating: '4.2', ratingValue: 95 },
                    { id: 'sec3-rowK-seat4', price: 110, section: 'Section 3', row: 'K', seat: 4, rating: '4.2', ratingValue: 95 },
                    { id: 'sec3-rowK-seat5', price: 110, section: 'Section 3', row: 'K', seat: 5, rating: '4.2', ratingValue: 95 },
                    
                ],
                '4': [
                    { id: 'sec4-rowP-seat1', price: 90, section: 'Section 4', row: 'P', seat: 1, rating: '4.0', ratingValue: 120 },
                    { id: 'sec4-rowP-seat2', price: 90, section: 'Section 4', row: 'P', seat: 2, rating: '4.0', ratingValue: 120 },
                    { id: 'sec4-rowP-seat3', price: 90, section: 'Section 4', row: 'P', seat: 3, rating: '4.0', ratingValue: 120 },
                    { id: 'sec4-rowP-seat4', price: 90, section: 'Section 4', row: 'P', seat: 4, rating: '4.0', ratingValue: 120 },
                    { id: 'sec4-rowP-seat5', price: 90, section: 'Section 4', row: 'P', seat: 5, rating: '4.0', ratingValue: 120 },
                    
                ],
                '5': [
                    { id: 'sec5-rowT-seat1', price: 70, section: 'Section 5', row: 'T', seat: 1, rating: '3.8', ratingValue: 150 },
                    { id: 'sec5-rowT-seat2', price: 70, section: 'Section 5', row: 'T', seat: 2, rating: '3.8', ratingValue: 150 },
                    { id: 'sec5-rowT-seat3', price: 70, section: 'Section 5', row: 'T', seat: 3, rating: '3.8', ratingValue: 150 },
                    { id: 'sec5-rowT-seat4', price: 70, section: 'Section 5', row: 'T', seat: 4, rating: '3.8', ratingValue: 150 },
                    
                ]
            };

            const sectionBoundingBoxes = {
          
            };

            seatingSections.forEach(section => {
                section.addEventListener('click', () => {
                    seatingSections.forEach(s => s.classList.remove('selected'));
                    section.classList.add('selected');
                    
                    const sectionId = section.dataset.zone;
                    const sectionName = section.dataset.name;
                    selectedSectionNameEl.textContent = sectionName;
                    
                    renderTickets(sectionId);
                    renderSeats(sectionId);
                    rightSidebar.style.display = 'block';
                });
            });

            function renderTickets(sectionId) {
                ticketListingsContainer.innerHTML = '';
                
                const tickets = ticketsBySection[sectionId] || [];
                
                if (tickets.length > 0) {
                    tickets.forEach(ticket => {
                        const ticketItemDiv = document.createElement('div');
                        ticketItemDiv.className = 'ticket-listing-item';
                        ticketItemDiv.dataset.id = ticket.id;
                        ticketItemDiv.dataset.price = ticket.price;
                        
                        if (selectedTickets[ticket.id]) {
                            ticketItemDiv.classList.add('selected-listing');
                        }

                        const ratingClass = ticket.rating > 4.5 ? 'high-rating' : '';
                        
                        ticketItemDiv.innerHTML = `
                            <div class="listing-price">$${ticket.price}</div>
                            <div class="listing-details">
                                <p class="section-row">Section ${ticket.section} - Row ${ticket.row} - Seat ${ticket.seat}</p>
                                ${ticket.perks ? `<p class="perks"><i class="fas fa-star"></i> ${ticket.perks}</p>` : ''}
                                <div class="rating ${ratingClass}">
                                    <i class="fas fa-star"></i> ${ticket.rating} (${ticket.ratingValue})
                                </div>
                            </div>
                        `;
                        
                        ticketListingsContainer.appendChild(ticketItemDiv);

                        ticketItemDiv.addEventListener('click', () => {
                            selectTicket(ticket.id, ticket);
                        });
                    });
                } else {
                    ticketListingsContainer.innerHTML = `<p style="text-align: center; color: var(--gray-text); font-style: italic;">No tickets available for this section.</p>`;
                }
                updateRightSidebar();
            }

            function renderSeats(sectionId) {
                seatsContainer.innerHTML = '';
                const tickets = ticketsBySection[sectionId] || [];
                const pos = sectionBoundingBoxes[sectionId];
                if (!pos || tickets.length === 0) return;

                const seatWidth = 10;
                const seatHeight = 10;
                const seatSpacingX = 5;
                const seatSpacingY = 15;
                const seatsPerRow = 10;

                let rowCounter = 0;
                let colCounter = 0;

                tickets.forEach(ticket => {
                    if (colCounter >= seatsPerRow) {
                        colCounter = 0;
                        rowCounter++;
                    }

                    const seatX = pos.x + 20 + colCounter * (seatWidth + seatSpacingX);
                    const seatY = pos.y + 20 + rowCounter * (seatHeight + seatSpacingY);

                    const seatElement = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    seatElement.setAttribute("width", seatWidth);
                    seatElement.setAttribute("height", seatHeight);
                    seatElement.setAttribute("class", "seat");
                    seatElement.setAttribute("data-id", ticket.id);
                    seatElement.setAttribute("x", seatX);
                    seatElement.setAttribute("y", seatY);
                    
                    if (selectedTickets[ticket.id]) {
                        seatElement.classList.add('selected');
                    }
                    
                    seatElement.addEventListener('click', () => {
                        selectTicket(ticket.id, ticket);
                    });

                    seatsContainer.appendChild(seatElement);
                    colCounter++;
                });
            }

            function selectTicket(ticketId, ticketData) {
                const isSelected = !!selectedTickets[ticketId];
                
                // Toggle the state
                if (isSelected) {
                    delete selectedTickets[ticketId];
                } else {
                    selectedTickets[ticketId] = ticketData;
                }

                // Sync the visual state of the seat box
                const seatElement = document.querySelector(`.seat[data-id="${ticketId}"]`);
                if (seatElement) {
                    seatElement.classList.toggle('selected', !isSelected);
                }

                // Sync the visual state of the ticket listing
                const listingItem = document.querySelector(`.ticket-listing-item[data-id="${ticketId}"]`);
                if (listingItem) {
                    listingItem.classList.toggle('selected-listing', !isSelected);
                }
                
                updateRightSidebar();
            }

            // Handle add-ons
            document.querySelectorAll('.addon-option').forEach(addon => {
                addon.addEventListener('click', () => {
                    const price = parseInt(addon.dataset.price);
                    addon.classList.toggle('selected');
                    if (addon.classList.contains('selected')) {
                        addonsTotal += price;
                    } else {
                        addonsTotal -= price;
                    }
                    updateRightSidebar();
                });
            });

            function updateRightSidebar() {
                let totalTicketPrice = 0;
                let totalTicketCount = 0;

                for (const ticketId in selectedTickets) {
                    const ticket = selectedTickets[ticketId];
                    totalTicketPrice += ticket.price;
                    totalTicketCount++;
                }

                const total = totalTicketPrice + addonsTotal;
                totalPriceEl.textContent = `Total: $${total}.00`;
                ticketsCountEl.textContent = totalTicketCount;
                addonsTotalEl.textContent = `$${addonsTotal}.00`;
            }
        });
    </script>
</body>
</html>